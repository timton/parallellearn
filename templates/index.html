{% extends "layout.html" %}

{% block title %}
    Welcome
{% endblock %}

{% block main %}

    <div class="row">
        <div class="col-md-2" id="practice-div">

            <!-- QUICK PRACTICE DIV -->
            <div class="quick-practice">

                <!-- making only one header with hidden responsive span sections takes html space -->
                <h4 class="d-md-none d-xl-block">Quick Practice</h4>
                <h4 class="d-none d-md-block d-xl-none">Practice</h4>
                {% if display["from_languages"]|length == 0 %}
                    <p>No languages yet!</p>
                {% else %}
                    <p class="d-md-none d-xl-block">I'd like to translate from</p>
                    <p class="d-none d-md-block d-xl-none">from</p>
                    <p class="d-md-none d-xl-block">
                        <select name="from_language" form="quick_practice_form">
                            {% for language in display["from_languages"] %}
                                <option value="{{ language }}">{{ language.title() }}</option>
                            {% endfor %}
                        </select>
                    </p>
                    <p class="d-none d-md-block d-xl-none">
                        <select name="from_language" form="quick_practice_form">
                            {% for language in display["from_languages"] %}
                                <option value="{{ language }}">{{ language.title()[:3] }}</option>
                            {% endfor %}
                        </select>
                    </p>
                    <p>to</p>
                    <p class="d-md-none d-xl-block">
                        <select name="to_language" form="quick_practice_form">
                            {% for language in display["to_languages"] %}
                                <option value="{{ language }}">{{ language.title() }}</option>
                            {% endfor %}
                        </select>
                    </br>
                    </p>
                    <p class="d-none d-md-block d-xl-none">
                        <select name="to_language" form="quick_practice_form">
                            {% for language in display["to_languages"] %}
                                <option value="{{ language }}">{{ language.title()[:3] }}</option>
                            {% endfor %}
                        </select>
                    </br>
                    </p>
                    <form action="{{ url_for('quick_practice') }}" method="post" id="quick_practice_form">
                        <p><button type="submit">Go!</button></p>
                    </form>
                {% endif %}
            </div>
        </div>

        <!-- CAROUSEL DIV -->
        <div class="col-md-10" id="carousel-div">
            <div class="carousel slide" data-ride="carousel" id="carousel">
                <div class="carousel-inner">
                    <div class="carousel-item active">
                        <div class="card">
                            <a href="{{ url_for('view_project', id=display['project_1']['id']) }}">
                                <div class="card-header">
                                    [{{ display['project_1']['type'] }}]
                                </div>
                                <div class="image-div">
                                    <img class="card-img-top" alt="poster image"
                                         src="{{ url_for('static', filename=display['project_1']['poster']) }}">
                                </div>
                                <div class="card-footer">
                                    <strong>{{ display['project_1']['title'].title() }}</strong>
                                </div>
                            </a>
                        </div>
                    </div>

                    {% for project in display["projects"] %}
                        <div class="carousel-item">
                            <div class="card">
                                <a href="{{ url_for('view_project', id=project['id']) }}">
                                    <div class="card-header">
                                        [{{ project['type'] }}]
                                    </div>
                                    <div class="image-div">
                                        <img class="card-img-top" alt="poster image"
                                             src="{{ url_for('static', filename=project['poster']) }}">
                                    </div>
                                    <div class="card-footer">
                                        <strong>{{ project['title'].title() }}</strong>
                                    </div>
                                </a>
                            </div>
                        </div>
                    {% endfor %}

                </div>
                <a class="carousel-control-prev" href="#carousel" role="button" data-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="sr-only">Previous</span>
                  </a>
                  <a class="carousel-control-next" href="#carousel" role="button" data-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="sr-only">Next</span>
                  </a>
            </div>
        </div>
    </div>

    <div class="row">

        <!-- RECENT DIV -->
        <div class="col-lg-5 order-lg-2" id="recent-div">

            <h5>Recent versions</h5>

            {% if display["new_versions"]|length == 0 %}

                <br>
                <p>No projects yet.</p>
                <br>

            {% else %}
                <div class="version-list">
                    <div class="row title-row">
                        <div class="col-5 col-xl-7"><strong>Project Title</strong></div>
                        <div class="col-3 col-xl-2"><strong>Language</strong></div>
                        <div class="col-4 col-xl-3"><strong>Added</strong></div>
                    </div>
                    <hr>

                    {% for version in display["new_versions"] %}
                        <a href="{{ url_for('view_project', id=version['project_id']) }}">
                        <div class="row">
                            <div class="col-7 d-none d-xl-block align-left">
                                <i><strong>{{ version["title"].title() }}</strong></i>
                                by {{ version["author"].title() }}, {{ version["year"] }}
                            </div>
                            <div class="col-5 d-xl-none">
                                <strong>{{ version["title"].title() }}</strong>
                            </div>
                            <div class="col-3 col-xl-2">{{ version["language"].title() }}</div>
                            <div class="col-sm-4 col-xl-3 d-none d-sm-block">
                                {{ version["timestamp"] }}
                            </div>
                            <div class="col-4 d-block d-sm-none">
                                {{ version["timestamp"][5:] }}
                            </div>
                        </div>
                        </a>
                    {% endfor %}
                </div>
            {% endif %}

        </div>

        <!-- POPULAR DIV -->
        <div class="col-lg-5 order-lg-3" id="popular-div">

            <h5>Popular versions</h5>

            {% if display["popular_versions"]|length == 0 %}

                <br>
                <p>No projects yet.</p>
                <br>

            {% else %}
                <div class="version-list">
                    <div class="row title-row">
                        <div class="col-5 col-xl-7"><strong>Project Title</strong></div>
                        <div class="col-3"><strong>Language</strong></div>
                        <div class="col-4 col-xl-2"><strong>Rating</strong></div>
                    </div>
                    <hr>

                    {% for version in display["popular_versions"] %}
                        <a href="{{ url_for('view_project', id=version['project_id']) }}">
                        <div class="row">
                            <div class="col-7 d-none d-xl-block align-left">
                                <i><strong>{{ version["title"].title() }}</strong></i>
                                by {{ version["author"].title() }}, {{ version["year"] }}
                            </div>
                            <div class="col-5 d-xl-none">
                                <strong>{{ version["title"].title() }}</strong>
                            </div>
                            <div class="col-3">{{ version["language"].title() }}</div>
                            <div class="col-4 col-xl-2">
                                {{ version["rating"] }}
                            </div>
                        </div>
                        </a>
                    {% endfor %}
                </div>
            {% endif %}

        </div>

        <!-- CHAT DIV -->
        <div class="col-lg-2 order-lg-1" id="chat-div">
            <h5 class="align-center d-lg-none d-xl-block">Feedback Board</h5>
            <h6 class="align-center d-none d-lg-block d-xl-none">Feedback Board</h6>
            <div>
                {% if display["comments"]|length != 0 %}
                    <ul>
                        {% for comment in display["comments"] %}
                            <li>
                                <i class="fas fa-comments"></i>
                                <strong>{{ comment["username"] }}</strong>: {{ comment["comment"] }}
                            </li>
                        {% endfor %}
                    </ul>
                {% endif %}
            </div>
            <form class="form-inline" action="{{ url_for('comment') }}" method="post">
                <label class="sr-only" for="comment">Comment</label>
                <input type="text" class="form-control form-control-sm" id="comment"
                       placeholder="Your feedback here..." name="comment" required>
                <button type="submit" class="btn btn-primary btn-sm">Post</button>
            <form>
        </div>
    </div>

{% endblock %}
